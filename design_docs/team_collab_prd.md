# PRD: Team Collaboration (v1)

## 1. Overview

**Feature name:** Team Collaboration
**Status:** Planned (v1)
**Target release:** Post-early access
**Primary audience:** Small teams (2–10 people), founders + collaborators
**Secondary audience:** Internal admins (support, debugging, usage observation)

Team Collaboration enables multiple users to work within the same **project**, sharing generated assets and AI outputs while maintaining **per-user quota accounting** and clear ownership boundaries.

This feature lays the foundation for future studio / enterprise workflows, while keeping v1 intentionally simple and low-risk.

---

## 2. Background & Motivation

Today, Arcane Forge projects are strictly **single-user owned**. This limits real-world usage because:

* Even small game teams typically involve:

  * A designer
  * An artist
  * A programmer
* Generated assets (images, audio, music, AI chats) often need to be:

  * Reviewed by others
  * Reused across roles
* Admins (internal team) currently lack visibility into **how projects evolve over time**

While early access users are mostly solo creators, team collaboration is a **necessary stepping stone** toward:

* Studio adoption
* Higher retention
* Future team / studio plans

---

## 3. Goals & Non-Goals

### 3.1 Goals

1. Allow a **project owner** to invite other users into a project
2. Enable **shared visibility** of:

   * Generated images
   * Audio / music
   * AI chat sessions
3. Preserve **per-user quota accounting**
4. Make it easy to attribute:

   * Who generated what
5. Allow internal admins to observe real usage patterns naturally

### 3.2 Non-Goals (Explicitly Out of Scope for v1)

* ❌ Real-time collaboration (Google Docs style)
* ❌ Multiple users talking inside the same AI chat session
* ❌ Role-based permission systems beyond owner / collaborator
* ❌ Shared billing or shared quota pools
* ❌ Asset commenting, annotations, or approvals
* ❌ Notifications, activity feeds, or presence indicators
* ❌ Version control, asset locking, or branching

These are **intentional omissions** to keep v1 simple and shippable.

---

## 4. User Roles & Permissions

### 4.1 Roles

**Project Owner**

* Creates the project
* Can invite/remove collaborators
* Full access to all project content
* Manages project-level settings

**Collaborator**

* Has access to the project
* Can:

  * View all assets
  * Generate new assets
  * Start new AI chat sessions
* Cannot:

  * Manage collaborators
  * Delete the project

**Admin**

* Treated exactly the same as a collaborator
* Can:

  * View and generate assets
  * Start chats
* Admin actions consume **admin’s own quota**
* No special “god mode” in v1

This keeps the permission model simple and consistent.

---

## 5. Invitation Model

### 5.1 Invitation Methods

Project owners can invite collaborators in **two ways**:

1. **Email-based invitation**

   * Owner enters collaborator’s email
   * If the user exists → added to project
   * If not → guided to sign up, then added

2. **Invite link**

   * Owner generates a shareable link
   * Link can be opened on web
   * Backend associates the user with the project
   * User is redirected back to Arcane Forge frontend

Both methods are supported in v1.

### 5.2 Invitation Constraints

* Only project owners can invite/remove collaborators
* Collaborators cannot invite others
* Invite links may be regenerated (future: expiration, revocation)

---

## 6. Project & Asset Visibility

### 6.1 Project Scope

A project is a **shared workspace** containing:

* Image generations
* Audio generations
* Music generations
* AI chat sessions (including Game Design Assistant)

All collaborators see the **same project state**.

### 6.2 Asset Visibility Rules

Within a project:

* All collaborators can:

  * View all generated assets
  * Reuse or download assets
* Assets are **project-scoped**, not private to users

### 6.3 Attribution

Every generated item should display:

* **Generated by:** User name
* **Generated at:** Timestamp

No additional attribution (prompt, seed, model details) is required for v1, unless already available.

---

## 7. Quota & Usage Accounting

### 7.1 Core Principle

> **Quota is always deducted from the user who performs the action.**

### 7.2 Examples

* Collaborator generates an image in someone else’s project
  → Deduct from collaborator’s quota
* Admin generates an asset for debugging
  → Deduct from admin’s quota
* Project owner generates assets
  → Deduct from owner’s quota

### 7.3 Constraints

* There is **no shared project quota** in v1
* If a collaborator runs out of quota:

  * They cannot generate
  * They can still view existing assets

This keeps billing simple and transparent.

---

## 8. AI Chat & Game Design Assistant Behavior

### 8.1 Chat Visibility

Inside a shared project:

* All users can:

  * View all past chat sessions
  * Start new chat sessions

### 8.2 Chat Ownership Rules

* Each chat session is **owned by its creator**
* Other users:

  * ❌ Cannot reply inside that session
  * ❌ Cannot continue the conversation thread
* They may start a **new** chat session instead

This avoids complexity while preserving collaboration context.

### 8.3 Explicit Out of Scope

* Multi-user conversations in the same AI chat
* Chat merging or branching
* Real-time AI discussions

---

## 9. UX Expectations (High-Level)

Without prescribing UI details:

* Users should clearly see:

  * Who is part of the project
  * Who generated each asset
* Ownership and permissions should feel:

  * Obvious
  * Non-surprising
* No real-time sync indicators are required
* Collaboration should feel:

  * Async
  * Calm
  * Predictable

---

## 10. Success Criteria (v1)

This feature is considered successful if:

* Projects with multiple collaborators are actively used
* Users reference shared assets across roles
* Admins can meaningfully observe:

  * Project evolution
  * User behavior
* No major confusion around:

  * Ownership
  * Quota usage

Metrics can remain **qualitative** for v1.

---

## 11. Future Extensions (Not v1)

This PRD intentionally enables future work such as:

* Real-time collaborative chat
* Studio-level workspaces
* Shared billing & quota pools
* Role-based access control
* Audit logs & activity feeds
* Enterprise permissions

---

# PRD 2 — Flutter Frontend

**Feature: Team Collaboration v1**

## 1. Purpose

Expose backend team collaboration functionality in a **clear, low-surprise UI**, enabling users to:

* Understand who is in a project
* Share projects safely
* Attribute generated content
* Avoid accidental quota misuse

Frontend must **not infer permissions** — it must respect backend responses.

---

## 2. Project Access Model

Frontend must assume:

* A user may belong to **many projects**
* Each project may belong to **many users**
* Ownership matters only for **management UI**

---

## 3. Project Settings / Members UI

### Required capabilities:

* Display:

  * Project owner
  * Collaborator list
* Owner-only controls:

  * Invite by email
  * Generate invite link
  * Remove collaborator

Frontend should hide or disable controls based on backend permission responses.

---

## 4. Invitation Flows

### 4.1 Email invite

* Input email
* Show pending / success state
* Handle “user not found” gracefully

---

### 4.2 Invite link

* Generate link
* Allow copy/share
* Redemption flow:

  * If not logged in → redirect to auth
  * After login → project opens

---

## 5. Asset Browsing & Attribution

Wherever assets are shown:

* Must display:

  * Generated by user name
* Must **not imply ownership**
* Assets are always presented as **project assets**

---

## 6. Generation UX & Quota Awareness

Before generation:

* UI should assume quota is **user-specific**
* If backend returns quota error:

  * Show user-facing error
  * Do not retry silently
* UI must not blame project owner for failures

---

## 7. AI Chat UI

### Chat list

* Show all chat sessions in project
* Show creator name per chat

### Chat detail

* If current user is creator:

  * Enable input
* Else:

  * Read-only view
  * Clear “Start new chat” CTA

No UI affordance for replying to others’ chats.

---

## 8. Removal & Access Loss

If user loses project access:

* Project should disappear from project list
* Open views should error and redirect safely

---

## 9. Error Handling Expectations

Frontend must gracefully handle:

* 403 (permission denied)
* 404 (project removed)
* Quota exceeded
* Invite expired / invalid

---

## 10. Non-Goals (Frontend)

* Live collaboration indicators
* Chat merging
* Asset comments
* Notifications
* Activity feed
* Offline collaboration
